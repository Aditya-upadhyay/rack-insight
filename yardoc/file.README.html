<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.1
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Insight</h1>

<p>Insight began life as an LRDesign fork of Rack::Bug by brynary.  We started a fork because, at the time, the main project wasn&#39;t making progress on Rails 3 support.  Since then we&#39;ve rewritten a lot of the code to make it more modular, easier to extend, and to store information about multiple requests so you can use it to inspect your AJAX requests (or any past request), not just previous page loads.</p>

<p>Having made really significant architectural changes, we&#39;ll be keeping Insight a separate project for the forseeable future.</p>

<ul>
<li>Forked From: <a href="http://github.com/brynary/rack-bug">http://github.com/brynary/rack-bug</a></li>
</ul>

<h2>Description</h2>

<p>Insight adds a diagnostics toolbar to Rack apps. When enabled, it injects a floating div
allowing exploration of logging, database queries, template rendering times, etc.   Insight
stores debugging info over many requests, incuding AJAX requests.</p>

<h2>Features</h2>

<ul>
<li>Password-based security</li>
<li>IP-based security</li>
<li>Insight instrumentation/reporting is broken up into panels.

<ul>
<li>Panels in default configuration:

<ul>
<li>Rails Info</li>
<li>Timer</li>
<li>Request Variables</li>
<li>SQL</li>
<li>Active Record</li>
<li>Cache</li>
<li>Templates</li>
<li>Log</li>
<li>Memory</li>
</ul></li>
<li>Other bundled panels:

<ul>
<li>Redis</li>
<li>Speedtracer</li>
</ul></li>
<li>Retired panels - if needed they could come back quickly:

<ul>
<li>Sphinx</li>
<li>Mongo</li>
</ul></li>
<li>The API for adding your own panels is simple and very powerful

<ul>
<li>Consistent interface to instrument application code</li>
<li>Consistent timing across panels</li>
<li>Easy to add sub-applications for more detailed reports (c.f. SQLPanel)</li>
<li>The documentation is scarce, so there&#39;s a feeling of adventure :/</li>
</ul></li>
</ul></li>
</ul>

<h2>Rails quick start</h2>

<p>Add this to your Gemfile
    gem &quot;logical-insight&quot;</p>

<p>In config/environments/development.rb, add:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_use'>use</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Insight::App</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:secret_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>someverylongandveryhardtoguesspreferablyrandomstring</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>Any environment with Insight loaded will have a link to &quot;Insight&quot; added to as the last child of BODY to normal responses.  Clicking that link will load the toolbar.  It&#39;s set with an id of &quot;logical-insight-enabler&quot;, so it can be styled to go somewhere more noticeable.  E.g. &quot;position: absolute; top: 0; left: 0&quot;</p>

<h2>Using with non-Rails Rack apps</h2>

<p>Just &#39;use Insight&#39; as any other middleware.  See the SampleApp in the spec/fixtures folder for an example Sinatra app.</p>

<p>If you wish to use the logger panel define the LOGGER constant that is a ruby Logger or ActiveSupport::BufferedLogger</p>

<h2>Configuring custom panels</h2>

<p>Specify the set of panels you want, in the order you want them to appear:</p>

<pre class="code ruby"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>logical-insight</span><span class='tstring_end'>&quot;</span></span>

<span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Dispatcher</span><span class='period'>.</span><span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_use'>use</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Insight::App</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:secret_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>someverylongandveryhardtoguesspreferablyrandomstring</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:panel_files</span> <span class='op'>=&gt;</span> <span class='qwords_beg'>%w[
</span><span class='tstring_content'>    timer_panel</span><span class='words_sep'>
</span><span class='tstring_content'>    request_variables_panel</span><span class='words_sep'>
</span><span class='tstring_content'>    redis_panel</span><span class='words_sep'>
</span><span class='tstring_content'>    templates_panel</span><span class='words_sep'>
</span><span class='tstring_content'>    log_panel</span><span class='words_sep'>
</span><span class='tstring_content'>    memory_panel</span><span class='words_sep'>
</span><span class='tstring_end'>  ]</span></span>
</code></pre>

<p>Files are looked up by prepending &quot;insight/panels/&quot; and requiring them.  Subclasses of Insight::Panel are loaded and added to the toolbar.  This makes it easier to work with the configuration and extend Insight with plugin gems.</p>

<h2>Running Insight in staging or production</h2>

<p>We have have found that Insight is fast enough to run in production for specific troubleshooting efforts.</p>

<h3>Configuration</h3>

<p>Add the middleware configuration to an initializer or the appropriate environment files, taking the rest of this section into consideration.</p>

<h3>Security</h3>

<p>Restrict access to particular IP addresses:</p>

<pre class="code ruby"><code>require &quot;ipaddr&quot;

ActionController::Dispatcher.middleware.use &quot;Insight::App&quot;
  :secret_key =&gt; &quot;someverylongandveryhardtoguesspreferablyrandomstring&quot;,
  :ip_masks   =&gt; [IPAddr.new(&quot;2.2.2.2/0&quot;)]
</code></pre>

<p>Restrict access using a password:</p>

<pre class="code ruby"><code><span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Dispatcher</span><span class='period'>.</span><span class='id identifier rubyid_middleware'>middleware</span><span class='period'>.</span><span class='id identifier rubyid_use'>use</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Insight::App</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:secret_key</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>someverylongandveryhardtoguesspreferablyrandomstring</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='symbol'>:password</span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>yourpassword</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<h4>custom file path for the logging database</h4>

<p>Logical Insight uses SQLite to store data from requests, and outputs a database file in the root directory. If you need the file to be created at another location (i.e. Heroku), you can pass a custom file path.</p>

<pre class="code ruby"><code>ActionController::Dispatcher.middleware.use &quot;Insight::App&quot;
  :secret_key =&gt; &quot;someverylongandveryhardtoguesspreferablyrandomstring&quot;,
  :database_path =&gt; &quot;tmp/my_insight_db.sqlite&quot;
</code></pre>

<h2>Authors</h2>

<ul>
<li>Maintained by <a href="mailto:judson@lrdesign.com">Judson Lester</a></li>
<li>Contributions from Luke Melia, Joey Aghion, Tim Connor, and more</li>
<li>Based on Rack::Bug by Bryan Helmkamp</li>
</ul>

<h2>Thanks</h2>

<p>Insight owes a lot to Rack::Bug, as the basis project.  There&#39;s a lot of smart in there.  Many thanks to Bryan for building it.</p>

<p>Inspiration for Rack::Bug is primarily from the Django debug toolbar. Additional ideas from Rails footnotes, Rack&#39;s ShowException middleware, Oink, and Rack::Cache</p>

<h2>Development</h2>

<p>For development, you&#39;ll need to install the following gems: rspec, rack-test, webrat, sinatra</p>

<h2>License</h2>

<p>See MIT-LICENSE.txt in this directory.</p>
</div></div>

    <div id="footer">
  Generated on Thu May 17 23:48:17 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.1 (ruby-1.9.3).
</div>

  </body>
</html>